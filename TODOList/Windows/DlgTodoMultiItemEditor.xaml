<Window x:Class="TODOList.DlgTodoMultiItemEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:b="http://schemas.microsoft.com/xaml/behaviors" xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="Todo Multi Item Edit"
        Width="610" Height="676"
        Style="{StaticResource {x:Type Window}}"
        mc:Ignorable="d"
        >
    <Window.Resources>
        <RoutedUICommand x:Key="Complete" Text="Some Text" />
    </Window.Resources>

    <Window.CommandBindings>
        <CommandBinding Command="{StaticResource Complete}" Executed="Complete_OnClick" />
    </Window.CommandBindings>

    <Window.InputBindings>
        <KeyBinding Key="Enter"
                    Command="{StaticResource Complete}"
                    Modifiers="Control"
                    />
    </Window.InputBindings>
    <!--
    <StackPanel TextElement.FontSize="16">
        <StackPanel Orientation="Horizontal">
            <CheckBox Name="ckSev" Margin="2" Click="SevCheckBox_OnClick" Content="Severity: " Foreground="LightGray" />
            <ComboBox Name="cbSev" Width="100" Margin="2" HorizontalAlignment="Left" KeyboardNavigation.IsTabStop="False" SelectionChanged="Severity_OnSelectionChange">
                <ComboBoxItem Content="None" IsSelected="True" />
                <ComboBoxItem Content="Low" />
                <ComboBoxItem Content="Med" />
                <ComboBoxItem Content="High" />
            </ComboBox>

            <CheckBox Name="ckRank" Margin="2" Click="RankCheckBox_OnClick" Content="Rank: " Foreground="LightGray" />
            <TextBox Name="tbRank" Width="40" Margin="2" PreviewTextInput="Rank_OnPreviewTextInput" TextChanged="Rank_OnTextChanged" />
            <Button Click="Rank_OnClick" CommandParameter="down" Content="6" FontFamily="Marlett" FontSize="20" KeyboardNavigation.IsTabStop="False" />
            <Button Click="Rank_OnClick" CommandParameter="up" Content="5" FontFamily="Marlett" FontSize="20" KeyboardNavigation.IsTabStop="False" />
            <Button Click="Rank_OnClick" CommandParameter="top" Content="55" FontFamily="Marlett" FontSize="20" KeyboardNavigation.IsTabStop="False" />
            <Button Click="Rank_OnClick" CommandParameter="bottom" Content="66" FontFamily="Marlett" FontSize="20" KeyboardNavigation.IsTabStop="False" />
        </StackPanel>

        <StackPanel Orientation="Horizontal">
            <CheckBox Name="ckTodo" Margin="2" Click="TodoCheckBox_OnClick" Content="TODO: " Foreground="LightGray" />
            <TextBox Name="tbTodo" Width="500" Height="200" Margin="2" KeyboardNavigation.TabIndex="0" ScrollViewer.VerticalScrollBarVisibility="Auto" TextWrapping="Wrap" />
        </StackPanel>

        <StackPanel Orientation="Horizontal">
            <StackPanel Width="74">
                <CheckBox Name="ckTags" Width="72" Margin="2" HorizontalAlignment="Right" Click="TagsCheckBox_OnClick" Content="Tags:" Foreground="LightGray" />
                <Button Width="72" Height="35" Click="AddTag_OnClick" Content="Add Tag" />
            </StackPanel>
            <ListBox Name="lbTags" Width="500" Height="300" Margin="2" KeyboardNavigation.TabIndex="2">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Height="30" Orientation="Horizontal">
                            <Button Width="35" Click="DeleteTag_OnClick" Content="X" />
                            <TextBox Name="tbTag" Width="410"
                                     Text="{Binding Text}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
            <CheckBox Name="ckComplete" Margin="2" Click="CompleteCheckBox_OnClick" />
            <Button Name="btnComplete" Width="150" Height="35" Click="Complete_OnClick" Content="Complete" KeyboardNavigation.IsTabStop="False" />

            <Button Width="150" Height="35" Click="Ok_OnClick" Content="OK" IsDefault="True" KeyboardNavigation.IsTabStop="False" />
            <Button Width="150" Height="35" Click="Cancel_OnClick" Content="Cancel" IsCancel="True" KeyboardNavigation.IsTabStop="False" />
        </StackPanel>
    </StackPanel>
    -->

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Row 0: Severity + Rank  -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="100" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="30" />
                <ColumnDefinition Width="30" />
                <ColumnDefinition Width="60" />
                <ColumnDefinition Width="60" />
            </Grid.ColumnDefinitions>

            <CheckBox x:Name="ckSev"
                      Grid.Column="0"
                      Margin="2" VerticalAlignment="Center"
                      Content="Severity:"
                      IsChecked="{Binding IsSeverityEnabled, Mode=TwoWay}"
                      />
            <ComboBox x:Name="cbSev"
                      Grid.Column="1"
                      Margin="2"
                      IsEnabled="{Binding IsChecked, ElementName=ckSev}"
                      >
                <ComboBoxItem Content="None" IsSelected="True" />
                <ComboBoxItem Content="Low" />
                <ComboBoxItem Content="Med" />
                <ComboBoxItem Content="High" />
            </ComboBox>

            <CheckBox x:Name="ckRank"
                      Grid.Column="3"
                      Margin="2,2,10,2" VerticalAlignment="Center"
                      Content="Rank:"
                      IsChecked="{Binding IsRankEnabled, Mode=TwoWay}"
                      />
            <TextBox x:Name="tbRank"
                     Grid.Column="4"
                     Width="40"
                     Margin="2"
                     IsEnabled="{Binding IsChecked, ElementName=ckRank}"
                     Text="{Binding TodoText, UpdateSourceTrigger=PropertyChanged}"
                     >
                <b:Interaction.Triggers>
                    <b:EventTrigger EventName="TextChanged">
                        <b:InvokeCommandAction Command="{Binding RankChangedCommand}" />
                    </b:EventTrigger>
                </b:Interaction.Triggers>

            </TextBox>
            <Button Grid.Column="5"
                    Content="6" FontFamily="Marlett"
                    FontSize="20" Tag="-1"
                    />
            <Button Grid.Column="6"
                    Content="5" FontFamily="Marlett"
                    FontSize="20" Tag="+1"
                    />
            <Button Grid.Column="7"
                    Content="55" FontFamily="Marlett"
                    FontSize="20" Tag="top"
                    />
            <Button Grid.Column="8"
                    Content="66" FontFamily="Marlett"
                    FontSize="20" Tag="bottom"
                    />
        </Grid>

        <!--  Row 1: Todo text  -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="500" />
            </Grid.ColumnDefinitions>

            <CheckBox x:Name="ckTodo"
                      Grid.Column="0"
                      Margin="2" VerticalAlignment="Top"
                      Content="TODO:"
                      IsChecked="{Binding IsTodoEnabled, Mode=TwoWay}"
                      />
            <TextBox x:Name="tbTodo"
                     Grid.Column="1"
                     Height="200"
                     Margin="2"
                     AcceptsReturn="True" TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     />
        </Grid>

        <!--  Row 2 & 3: Tags section  -->
        <Grid Grid.Row="2" Grid.RowSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Left column: Tags checkbox + Add button  -->
            <StackPanel Grid.Column="0" VerticalAlignment="Top">
                <CheckBox x:Name="ckTags"
                          Margin="2" HorizontalAlignment="Right"
                          Content="Tags:"
                          IsChecked="{Binding IsTagEnabled, Mode=TwoWay}"
                          />
                <Button Width="72" Height="35"
                        Margin="2,5,2,0" HorizontalAlignment="Right"
                        Content="Add Tag"
                        />
            </StackPanel>

            <!--  Right column: ListBox  -->
            <ListBox x:Name="lbTags"
                     Grid.Column="1"
                     Margin="2"
                     ItemsSource="{Binding Tags}"
                     >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Width="490" Height="34">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0"
                                    Width="30" Height="30"
                                    Content="X"
                                    />
                            <TextBox Grid.Column="1"
                                     Margin="5,0"
                                     Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>

        <!--  Row 4: Bottom buttons  -->
        <StackPanel Grid.Row="4"
                    Margin="0,15,0,0" HorizontalAlignment="Center"
                    Orientation="Horizontal"
                    >
            <CheckBox x:Name="ckComplete"
                      Margin="0,0,20,0" VerticalAlignment="Center"
                      IsChecked="{Binding IsCompleteEnabled, Mode=TwoWay}"
                      />
            <Button Width="150" Height="35"
                    Margin="0,0,10,0"
                    Content="Complete"
                    IsEnabled="{Binding IsChecked, ElementName=ckComplete}"
                    />
            <Button Width="150" Height="35"
                    Margin="0,0,10,0"
                    Content="OK" IsDefault="True"
                    />
            <Button Width="150" Height="35"
                    Command="{Binding CancelCommand}"
                    Content="Cancel" IsCancel="True"
                    />
        </StackPanel>
    </Grid>
</Window>