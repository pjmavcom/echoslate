<Window x:Class="TODOList.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TODOList"
		mc:Ignorable="d"
        Title="{Binding WindowTitle}" Height="1080" Width="1920"
		FocusManager.FocusedElement="{Binding ElementName=lbIncompleteItems}" 
		Style="{StaticResource {x:Type Window}}" >
	
	<Window.Resources >
		<local:ProgressBarForegroundConverter x:Key="pbfg" />
		
		<RoutedUICommand x:Key="Add" Text="Text" />
		<RoutedUICommand x:Key="Complete" Text="Some Text" />
		<RoutedUICommand x:Key="Edit" Text="Another Text" />
		<RoutedUICommand x:Key="SwitchTab" Text="Yet Another Text" />
		<RoutedUICommand x:Key="SwitchSeverity" Text="And Yet Another Text" />
		<RoutedUICommand x:Key="QuickSave" Text="And Yet Another Text" />
		<RoutedUICommand x:Key="QuickLoadPrevious" Text="And Yet Another Another Text" />
		<RoutedUICommand x:Key="StartStopTimer" Text="And Yet Another Another Text" />
	</Window.Resources >
	
	<Window.CommandBindings>
		<CommandBinding Command="{StaticResource Add}" Executed="hkAdd" />
		<CommandBinding Command="{StaticResource Complete}" Executed="hkComplete" />
		<CommandBinding Command="{StaticResource Edit}" Executed="hkEdit" />
		<CommandBinding Command="{StaticResource SwitchTab}" Executed="hkSwitchTab" />
		<CommandBinding Command="{StaticResource SwitchSeverity}" Executed="hkSwitchSeverity" />
		<CommandBinding Command="{StaticResource QuickSave}" Executed="hkQuickSave" />
		<CommandBinding Command="{StaticResource QuickLoadPrevious}" Executed="hkQuickLoadPrevious" />
		<CommandBinding Command="{StaticResource StartStopTimer}" Executed="hkStartStopTimer" />
	</Window.CommandBindings>
	
	<Window.InputBindings>
		<KeyBinding Key="Enter" Modifiers="Alt" Command="{StaticResource Add}" />
		<KeyBinding Key="Enter" Modifiers="Control" Command="{StaticResource Complete}" />
		<KeyBinding Key="Enter" Command="{StaticResource Edit}" />
		<KeyBinding Key="Divide" Command="{StaticResource SwitchTab}" CommandParameter="left" />
		<KeyBinding Key="Multiply" Command="{StaticResource SwitchTab}" CommandParameter="right" />
		<KeyBinding Key="Subtract" Command="{StaticResource SwitchSeverity}" CommandParameter="up" />
		<KeyBinding Key="Add" Command="{StaticResource SwitchSeverity}" CommandParameter="down" />
		<KeyBinding Key="S" Modifiers="Control" Command="{StaticResource QuickSave}" />
		<KeyBinding Key="OemComma" Modifiers="Control" Command="{StaticResource QuickLoadPrevious}" />
		<KeyBinding Key="P" Modifiers="Control" Command="{StaticResource StartStopTimer}" />
	</Window.InputBindings>
	
	
	<DockPanel TextElement.FontSize="16" TextElement.FontFamily="Source Code Pro">
		<Menu DockPanel.Dock="Top" FontSize="16" >
			<MenuItem Header="_File" >
				<MenuItem Header="New" Click="mnuNew_Click" /> 				
				<Separator />
				<MenuItem Header="Save" Click="mnuSave_Click" />
				<MenuItem Header="SaveAs" Click="mnuSaveAs_Click" />
				<CheckBox Name="ckAutoSave" Content="AutoSave" FontSize="16" FontFamily="Source Code Pro" Foreground="Gray" Click="AutoSave_OnClick" IsChecked="True" />
				<Separator />
				<MenuItem Header="Load" Click="mnuLoad_Click" />
				<Separator />
				<MenuItem Header="Quit" Click="mnuQuit_Click" />
			</MenuItem >
			<MenuItem Header="Quick Save" Click="mnuSave_Click" />
			<MenuItem Name="mnuRecentSaves" Header="Recent Saves" ItemsSource="{Binding RecentFiles}" Click="mnuSaveFiles_Click" MouseRightButtonUp="mnuRecentSavesRMB" >
				<MenuItem.ContextMenu>
					<ContextMenu >
						<MenuItem Header="Remove" Click="mnuRemoveFile_Click" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}" DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}"/>
					</ContextMenu >
				</MenuItem.ContextMenu>
			</MenuItem >
			<MenuItem Name="mnuRecentLoads" Header="Recent Loads" ItemsSource="{Binding RecentFiles}" Click="mnuLoadFiles_Click" MouseRightButtonUp="mnuRecentLoadsRMB" >
				<MenuItem.ContextMenu>
					<ContextMenu >
						<MenuItem Header="Remove" Click="mnuRemoveFile_Click" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}" DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}"/>
					</ContextMenu >
				</MenuItem.ContextMenu>
			</MenuItem >
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" >
				<Label Name="lblPomo" Width="400" HorizontalContentAlignment="Right" />
				<Button FontFamily="Marlett" FontSize="20" Content="4" Click="btnPomoTimerStart_OnClick" />
				<Button FontFamily="Marlett" FontSize="20" Content="g" Click="btnPomoTimerStop_OnClick" />
				<Label Name="lblPomoWork" Width="100" />
				<Button Content="+5" Click="btnPomoWorkInc_OnClick" />
				<Button Content="-5" Click="btnPomoWorkDec_OnClick" />
				<Label Name="lblPomoBreak" Width="100" />
				<Button Content="+5" Click="btnPomoBreakInc_OnClick" />
				<Button Content="-5" Click="btnPomoBreakDec_OnClick" />
			</StackPanel >
		</Menu >
		
		<TabControl Name="TabControl">
			<!-- VCS History tab -->
			<TabItem Name="tabHistory" Header="History" KeyboardNavigation.IsTabStop="False" >
				<Grid >
					<Grid.ColumnDefinitions >
						<ColumnDefinition Width="300" />
						<ColumnDefinition />
					</Grid.ColumnDefinitions >
					<Grid Grid.Column="0" >
						<Grid.RowDefinitions >
							<RowDefinition Height="35" />
							<RowDefinition />
						</Grid.RowDefinitions >
						<StackPanel Grid.Row="0" Orientation="Horizontal" >
							<Button Content="New" Click="btnHNewHistory_Click" Width="90" KeyboardNavigation.IsTabStop="False" />
							<Button Content="Delete" Click="btnHDeleteHistory_Click" Width="90" KeyboardNavigation.IsTabStop="False" />
						</StackPanel >
						<ListBox Grid.Row="1" Name="lbHistory" ItemsSource="{Binding HistoryItems}" SelectionChanged="lbHHistory_SelectionChanged" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" >
							<ListBox.ItemTemplate >
								<DataTemplate >
									<Grid Margin="0,2" >
										<Grid.ColumnDefinitions >
											<ColumnDefinition Width="25" />
											<ColumnDefinition />
										</Grid.ColumnDefinitions >
										<Border Name="PlaceHolderBorder" Grid.Column="0" Margin="7"/>
										<Button Grid.Column="0" FontFamily="Marlett" FontSize="20" Content="1" Click="btnHCopyHistory_Click" KeyboardNavigation.IsTabStop="False" />
										<TextBlock Grid.Column="1" Text="{Binding Title}" TextWrapping="Wrap" KeyboardNavigation.IsTabStop="False" />
									</Grid >
								</DataTemplate >
							</ListBox.ItemTemplate >
						</ListBox >
					</Grid >
						
					<Grid Grid.Column="1" >
						<Grid.RowDefinitions >
							<RowDefinition Height="35" />
							<RowDefinition Height="35" />
							<RowDefinition Height="300" />
							<RowDefinition Height="300" />
							<RowDefinition Height="300" />
							<RowDefinition />
						</Grid.RowDefinitions >
						<StackPanel Orientation="Horizontal" Grid.Row="0">
							<Label Content="Time: " Margin="2" />
							<Label Name="lblHTotalTime" Margin="2" Width="40" />
						</StackPanel >
						<TextBox Grid.Row="1" Name="tbHTitle" TextWrapping="NoWrap" TextChanged="tbHTitle_TextChanged" ScrollViewer.VerticalScrollBarVisibility="Disabled" />
						<TextBox Grid.Row="2" Name="tbHNotes" AcceptsReturn="True" TextWrapping="Wrap" TextChanged="tbHNotes_TextChanged" ScrollViewer.VerticalScrollBarVisibility="Auto" />
						<ListBox Grid.Row="3" Name="lbCompletedTodosBugs" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" MouseDoubleClick="mnuHEdit_Click" >
							<ListBox.ItemTemplate >
								<DataTemplate >
									<Grid ToolTip="{Binding NotesAndTags}" Margin="0,2" >
										<Grid.ColumnDefinitions >
											<ColumnDefinition Width="25" />
											<ColumnDefinition />
										</Grid.ColumnDefinitions >
										<Button Grid.Column="0" Name="btnHDeleteTodo" FontFamily="Marlett" FontSize="20" Content="r" Click="btnHDeleteTodo_Click" KeyboardNavigation.IsTabStop="False" />
										<TextBlock Grid.Column="1" Text="{Binding Todo}" TextAlignment="Left" TextWrapping="Wrap" Margin="4" />
									</Grid >
								</DataTemplate >
							</ListBox.ItemTemplate >
						</ListBox >
						<ListBox Grid.Row="4" Name="lbCompletedTodosFeatures" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" MouseDoubleClick="mnuHEdit_Click" >
							<ListBox.ItemTemplate >
								<DataTemplate >
									<Grid ToolTip="{Binding NotesAndTags}" Margin="0,2" >
										<Grid.ColumnDefinitions >
											<ColumnDefinition Width="25" />
											<ColumnDefinition />
										</Grid.ColumnDefinitions >
										<Button Grid.Column="0" Name="btnHDeleteTodo" FontFamily="Marlett" FontSize="20" Content="r" Click="btnHDeleteTodo_Click" KeyboardNavigation.IsTabStop="False" />
										<TextBlock Grid.Column="1" Text="{Binding Todo}" TextAlignment="Left" TextWrapping="Wrap" Margin="4" />
									</Grid >
								</DataTemplate >
							</ListBox.ItemTemplate >
						</ListBox >
						<ListBox Grid.Row="5" Name="lbCompletedTodos" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" MouseDoubleClick="mnuHEdit_Click" >
							<ListBox.ItemTemplate >
								<DataTemplate >
									<Grid ToolTip="{Binding NotesAndTags}" Margin="0,2" >
										<Grid.ColumnDefinitions >
											<ColumnDefinition Width="25" />
											<ColumnDefinition />
										</Grid.ColumnDefinitions >
										<Button Grid.Column="0" Name="btnHDeleteTodo" FontFamily="Marlett" FontSize="20" Content="r" Click="btnHDeleteTodo_Click" KeyboardNavigation.IsTabStop="False" />
										<TextBlock Grid.Column="1" Text="{Binding Todo}" TextAlignment="Left" TextWrapping="Wrap" Margin="4" />
									</Grid >
								</DataTemplate >
							</ListBox.ItemTemplate >
						</ListBox >
					</Grid >
				</Grid >
			</TabItem >
			
			<TabItem Name="tabTodos" Header="TODOs" >
				<Grid >
					<Grid.RowDefinitions >
						<RowDefinition />
						<RowDefinition Height="100" />
					</Grid.RowDefinitions >
					<TabControl Name="tabTest" ItemsSource="{Binding}" SelectionChanged="tabSelectionChanged" >
						<TabControl.ContextMenu >
							<ContextMenu >
								<MenuItem Header="Add New Tab" Click="AddNewTab_OnClick" />
								<MenuItem Header="Remove Tab" Click="RemoveTab_OnClick" />
							</ContextMenu >
						</TabControl.ContextMenu >
						<TabControl.ContentTemplate >
							<DataTemplate >
								<Grid  >
									<Grid.RowDefinitions >
										<RowDefinition Height="30" />
										<RowDefinition Height="*" />
										<!-- <RowDefinition Height="100" /> -->
									</Grid.RowDefinitions >
									
									<Grid >
										<Grid.ColumnDefinitions >
											<ColumnDefinition Width="35" />
											
											<ColumnDefinition Width="200" />
											<ColumnDefinition Width="150" />
											<ColumnDefinition Width="100" />
											
											<ColumnDefinition Width="90" />
											<ColumnDefinition Width="150" />
											<ColumnDefinition />
											
										</Grid.ColumnDefinitions >
										<ComboBox Grid.Column="1" Name="cbHashTags" ItemsSource="{Binding HashTags}" SelectionChanged="cbHashtags_SelectionChanged" KeyboardNavigation.IsTabStop="False" />
										<Button Grid.Column="2" Name="btnSortDate" Content="Date" Click="btnSort_Click" CommandParameter="date" KeyboardNavigation.IsTabStop="False" />
										<Button Grid.Column="3" Name="btnSortSeverity" Content="Severity" Click="btnSort_Click" CommandParameter="sev" KeyboardNavigation.IsTabStop="False" />
										
										<Button Grid.Column="4" Name="btnSortRank" Content="Rank" Click="btnSort_Click" CommandParameter="rank" KeyboardNavigation.IsTabStop="False" />
										<Button Grid.Column="5" Name="btnSortActive" Content="Active" Click="btnSort_Click" CommandParameter="active" KeyboardNavigation.IsTabStop="False" />
										
									</Grid >
									
									<!-- The list of incomplete todos -->
									<ListBox Name="lbIncompleteItems" ItemsSource="{Binding IncompleteItems}" HorizontalContentAlignment="Stretch" Grid.Row="1" KeyboardNavigation.TabIndex="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" MouseDoubleClick="mnuTEdit_Click" SelectionMode="Extended" >
										<ListBox.ContextMenu >
											<ContextMenu >
												<MenuItem Name="cmnuEdit" Header="Edit" Click="mnuTEdit_Click" />
												<MenuItem Name="cmnuDelete" Header="Delete" Click="mnuTDelete_Click" />
												<Separator />
												<MenuItem Name="cmnuResetTimer" Header="Reset Timer" Click="mnuResetTimer_Click" />
											</ContextMenu >
										</ListBox.ContextMenu >
										<ListBox.ItemTemplate >
											<DataTemplate >
												<Grid ToolTip="{Binding NotesAndTags}" Margin="0,2" >
													<Grid.ColumnDefinitions >
														<ColumnDefinition Width="25" /> <!-- Complete button -->
														<ColumnDefinition Width="200" /> <!-- HashTags -->
														<ColumnDefinition Width="*" /> <!-- DateTime -->
														
														<ColumnDefinition Width="100" /> <!-- Severity -->
													
														<ColumnDefinition Width="40" /> <!-- RANK -->
														<ColumnDefinition Width="25" />
														<ColumnDefinition Width="25" />
				
														<ColumnDefinition Width="60" /> <!-- TIME TAKEN -->
														<ColumnDefinition Width="40" />
														
														<ColumnDefinition Width="25" />
														<ColumnDefinition Width="25" />
				
														<ColumnDefinition Width="3*" /> <!-- Todo -->
													</Grid.ColumnDefinitions >
													<Button Grid.Column="0" Name="btnComplete" FontFamily="Marlett" FontSize="20" Content="a" Click="btnTComplete_Click" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													<TextBlock Grid.Column="1" Text="{Binding TagsSorted}" TextWrapping="WrapWithOverflow" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													<TextBlock Grid.Column="2" Text="{Binding StartDateTime}" Foreground="Red" Margin="4" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													
													<ProgressBar Grid.Column="3" Minimum="0" Maximum="3" Value="{Binding Severity}" BorderBrush="DarkSlateGray" Background="Black" Foreground="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Value, Converter={StaticResource pbfg}}" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													
													<Label Grid.Column="4" Content="{Binding Rank}" Margin="4" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													<Button Grid.Column="5" FontFamily="Marlett" FontSize="20" Content="6" Click="btnRank_Click" CommandParameter="down" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													<Button Grid.Column="6" FontFamily="Marlett" FontSize="20" Content="5" Click="btnRank_Click" CommandParameter="up" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													
													<Label Grid.Column="7" Content="{Binding TimeTakenInMinutes, UpdateSourceTrigger=PropertyChanged}"  ContentStringFormat="{}{0:000.## :}" HorizontalContentAlignment="Right" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" >
														<Label.Style >
															<Style >
																<Style.Triggers >
																	<DataTrigger Binding="{Binding IsTimerOn}" Value="True" >
																		<Setter Property="Label.Background" Value="Lime" />
																	</DataTrigger >
																	<DataTrigger Binding="{Binding IsTimerOn}" Value="False" >
																		<Setter Property="Label.Background" Value="Maroon" />
																	</DataTrigger >
																</Style.Triggers >
															</Style >
														</Label.Style >
													</Label >
													<Label Grid.Column="8" Content="{Binding TimeTaken.Second}" ContentStringFormat="{}{0:00.##}" HorizontalContentAlignment="Left" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" >
														<Label.Style >
															<Style >
																<Style.Triggers >
																	<DataTrigger Binding="{Binding IsTimerOn}" Value="True" >
																		<Setter Property="Label.Background" Value="Lime" />
																	</DataTrigger >
																	<DataTrigger Binding="{Binding IsTimerOn}" Value="False" >
																		<Setter Property="Label.Background" Value="Maroon" />
																	</DataTrigger >
																</Style.Triggers >
															</Style >
														</Label.Style >
													</Label >
													<Button Grid.Column="9" FontFamily="Marlett" FontSize="20" Content="4" Click="btnTimeTaken_Click" CommandParameter="start" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													<Button Grid.Column="10" FontFamily="Marlett" FontSize="20" Content="g" Click="btnTimeTaken_Click" CommandParameter="stop" Height="30" VerticalAlignment="Top" KeyboardNavigation.IsTabStop="False" />
													
													<TextBlock Grid.Column="11" Text="{Binding Todo}" TextAlignment="Left" TextWrapping="WrapWithOverflow" Margin="4,0" />
												</Grid >
											</DataTemplate >
										</ListBox.ItemTemplate >
									</ListBox >
									
									<!-- The add, radio buttons, and input field -->
								</Grid >
							</DataTemplate >
						</TabControl.ContentTemplate >
					</TabControl >
					<Grid Grid.Row="1" >
						<Grid.ColumnDefinitions >
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="100" />
						</Grid.ColumnDefinitions >
						<TextBox x:Name="tbNewTodo" Grid.Column="0" TextWrapping="WrapWithOverflow" KeyboardNavigation.TabIndex="1" />
						<StackPanel Grid.Column="1" >
							<ComboBox Name="cbSeverity" SelectionChanged="cbSeverity_SelectionChanged" Loaded="cb_IsLoaded" Unloaded="cb_IsLoaded" KeyboardNavigation.TabIndex="2" >
								<ComboBoxItem Content="None" /> 
								<ComboBoxItem Content="Low" IsSelected="True" />
								<ComboBoxItem Content="Med" />
								<ComboBoxItem Content="High" />
							</ComboBox >
							<Button Content="Add" Click="btnTAdd_Click" KeyboardNavigation.TabIndex="3" />
						</StackPanel >
					</Grid >
				</Grid >
			</TabItem >
		</TabControl >
    </DockPanel >
</Window >
