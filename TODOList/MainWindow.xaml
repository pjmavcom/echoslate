<Window x:Class="Echoslate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:Echoslate"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:userControls="clr-namespace:Echoslate.UserControls"
        xmlns:viewModels="clr-namespace:Echoslate.ViewModels"
        xmlns:wpfTool="clr-namespace:Xceed.Wpf.Toolkit;assembly=Xceed.Wpf.Toolkit"
        x:Name="MainWindowInstance"
        Title="{Binding WindowTitle}"
        Width="1920" Height="1080"
        Style="{StaticResource {x:Type Window}}"
        mc:Ignorable="d"
        >

    <Window.Resources>
        <RoutedUICommand x:Key="Add" Text="Text" />
        <RoutedUICommand x:Key="Complete" Text="Some Text" />
        <RoutedUICommand x:Key="Edit" Text="Another Text" />
        <RoutedUICommand x:Key="SwitchTab" Text="Yet Another Text" />
        <RoutedUICommand x:Key="SwitchSeverity" Text="And Yet Another Text" />
        <RoutedUICommand x:Key="QuickSave" Text="And Yet Another x2 Text" />
        <RoutedUICommand x:Key="QuickLoadPrevious" Text="And Yet Another Another Text" />
        <RoutedUICommand x:Key="StartStopTimer" Text="And Yet Another Another Text" />

    </Window.Resources>

    <Window.InputBindings>
        <KeyBinding Key="Enter"
                    Command="{StaticResource Add}"
                    Modifiers="Alt"
                    />
        <KeyBinding Key="Enter"
                    Command="{StaticResource Complete}"
                    Modifiers="Control"
                    />
        <KeyBinding Key="Enter" Command="{StaticResource Edit}" />
        <KeyBinding Key="Divide"
                    Command="{StaticResource SwitchTab}"
                    CommandParameter="left"
                    />
        <KeyBinding Key="Multiply"
                    Command="{StaticResource SwitchTab}"
                    CommandParameter="right"
                    />
        <KeyBinding Key="Subtract"
                    Command="{StaticResource SwitchSeverity}"
                    CommandParameter="up"
                    />
        <KeyBinding Key="Add"
                    Command="{StaticResource SwitchSeverity}"
                    CommandParameter="down"
                    />
        <KeyBinding Key="S"
                    Command="{StaticResource QuickSave}"
                    Modifiers="Control"
                    />
        <KeyBinding Key="OemComma"
                    Command="{StaticResource QuickLoadPrevious}"
                    Modifiers="Control"
                    />
        <KeyBinding Key="P"
                    Command="{StaticResource StartStopTimer}"
                    Modifiers="Control"
                    />
    </Window.InputBindings>


    <Grid HorizontalAlignment="Stretch"
          ClipToBounds="True" TextElement.FontFamily="Source Code Pro" TextElement.FontSize="16"
          >
        <!--  DataContext="{StaticResource MainWindowVM}"  -->
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="500" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Menu Name="mnuMain"
                  Grid.Column="0"
                  FontSize="16"
                  >
                <MenuItem Header="_File">
                    <MenuItem Click="mnuNew_OnClick" Header="New" />
                    <Separator />
                    <MenuItem Click="mnuLoad_OnClick" Header="Load" />
                    <Separator />
                    <MenuItem Click="mnuSave_OnClick" Header="Save" />
                    <MenuItem Click="mnuSaveAs_OnClick" Header="SaveAs" />
                    <Separator />
                    <MenuItem Click="mnuOptions_OnClick" Header="Options" />
                    <Separator />
                    <MenuItem Click="mnuQuit_OnClick" Header="Quit" />
                </MenuItem>
                <MenuItem Name="mnuRecentLoads"
                          Click="mnuLoadFiles_OnClick" Header="Recent Loads"
                          ItemsSource="{Binding}"
                          MouseRightButtonUp="mnuRecentLoads_OnRMBUp"
                          >
                    <MenuItem.ContextMenu>
                        <ContextMenu>
                            <MenuItem Click="mnuRemoveFile_OnClick"
                                      CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}"
                                      Header="Remove"
                                      >
                                <MenuItem.DataContext>
                                    <Binding RelativeSource="{RelativeSource Self}">
                                        <Binding.Path>PlacementTarget.DataContext</Binding.Path>
                                    </Binding>
                                </MenuItem.DataContext>
                            </MenuItem>
                        </ContextMenu>
                    </MenuItem.ContextMenu>
                </MenuItem>
                <MenuItem Click="mnuHelp_OnClick" Header="Help" />
            </Menu>
            <StackPanel Grid.Column="1"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal"
                        >
                <Grid>
                    <ProgressBar Name="pbPomo"
                                 Width="400" Height="30"
                                 Background="Maroon" BorderBrush="DarkSlateGray" Maximum="100"
                                 Minimum="0"
                                 Value="{Binding PomoTimeLeft, UpdateSourceTrigger=PropertyChanged}"
                                 />
                    <Label Name="lblPomo"
                           Width="400"
                           HorizontalContentAlignment="Right"
                           FontSize="20" FontWeight="SemiBold" MouseDoubleClick="PomoTimerReset_OnClick"
                           MouseUp="PomoTimerToggle_OnClick"
                           />
                </Grid>
                <Label Width="100" Content="Work: " />
                <wpfTool:IntegerUpDown Name="iudPomoWork"
                                       Width="80"
                                       Minimum="1" ValueChanged="PomoWork_OnValueChanged"
                                       Value="{Binding PomoWorkTime, UpdateSourceTrigger=PropertyChanged}"
                                       />
                <Label Width="100" Content="Break: " />
                <wpfTool:IntegerUpDown Name="iudPomoBreak"
                                       Width="80"
                                       Minimum="1" ValueChanged="PomoBreak_OnValueChanged"
                                       Value="{Binding PomoBreakTime, UpdateSourceTrigger=PropertyChanged}"
                                       />
            </StackPanel>
        </Grid>
        <TabControl Name="tabControl"
                    Grid.Row="1"
                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                    ClipToBounds="True"
                    >

            <!--  VCS History tab  -->
            <TabItem Name="tabHistory"
                     Header="History" KeyboardNavigation.IsTabStop="False"
                     >
                <userControls:HistoryView DataContext="{Binding HistoryVM}" />
            </TabItem>

            <!--  VCS TodoList tab  -->
            <TabItem HorizontalAlignment="Stretch" VerticalAlignment="Center"
                     Header="Todo List"
                     >
                <userControls:TodoDisplayView DataContext="{Binding TodoListVM}" />
            </TabItem>

            <!--  VCS Kanban tab  -->
            <TabItem HorizontalAlignment="Stretch" VerticalAlignment="Center"
                     Header="Kanban"
                     >
                <userControls:TodoDisplayView DataContext="{Binding KanbanVM}" />
            </TabItem>

            <TabItem Header="Log">
                <!--  VCS Log tab  -->
                <StackPanel>
                    <Button Height="30"
                            Click="RefreshLog_OnClick" Content="Refresh"
                            />
                    <ListBox Name="lbHistoryLog" ScrollViewer.VerticalScrollBarVisibility="Auto" />
                </StackPanel>
            </TabItem>
        </TabControl>
        <!-- </DockPanel> -->
    </Grid>
</Window>