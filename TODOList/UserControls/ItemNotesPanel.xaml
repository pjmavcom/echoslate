<UserControl x:Class="Echoslate.UserControls.ItemNotesPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:Echoslate.UserControls" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             >

    <Grid Margin="10" DataContext="{Binding SelectedTodoItem, RelativeSource={RelativeSource AncestorType=UserControl}}">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="65" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="3*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="3*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="3*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Label Grid.Row="0" Content="Title:" />
        <TextBox Grid.Row="1"
                 Margin="3"
                 Text="{Binding Todo, UpdateSourceTrigger=PropertyChanged}"
                 TextWrapping="WrapWithOverflow"
                 >
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="LostFocus">
                    <b:InvokeCommandAction Command="{Binding DataContext.RefreshAllCommand, RelativeSource={RelativeSource AncestorType={x:Type local:TodoListView}}}" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </TextBox>
        <Label Grid.Row="2" Content="Notes:" />
        <TextBox Grid.Row="3"
                 Margin="3"
                 AcceptsReturn="True" ScrollViewer.VerticalScrollBarVisibility="Auto"
                 Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"
                 TextWrapping="WrapWithOverflow"
                 >
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="LostFocus">
                    <b:InvokeCommandAction Command="{Binding DataContext.RefreshAllCommand, RelativeSource={RelativeSource AncestorType={x:Type local:TodoListView}}}" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </TextBox>
        <Label Grid.Row="4" Content="Problem:" />
        <TextBox Grid.Row="5"
                 Margin="3"
                 AcceptsReturn="True" ScrollViewer.VerticalScrollBarVisibility="Auto"
                 Text="{Binding Problem, UpdateSourceTrigger=PropertyChanged}"
                 TextWrapping="WrapWithOverflow"
                 >
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="LostFocus">
                    <b:InvokeCommandAction Command="{Binding DataContext.RefreshAllCommand, RelativeSource={RelativeSource AncestorType={x:Type local:TodoListView}}}" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </TextBox>
        <Label Grid.Row="6" Content="Solution:" />
        <TextBox Grid.Row="7"
                 Margin="3"
                 AcceptsReturn="True" ScrollViewer.VerticalScrollBarVisibility="Auto"
                 Text="{Binding Solution, UpdateSourceTrigger=PropertyChanged}"
                 TextWrapping="WrapWithOverflow"
                 >
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="LostFocus">
                    <b:InvokeCommandAction Command="{Binding DataContext.RefreshAllCommand, RelativeSource={RelativeSource AncestorType={x:Type local:TodoListView}}}" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
        </TextBox>
        <StackPanel Grid.Row="8" Orientation="Horizontal">
            <Label Margin="2" HorizontalAlignment="Right"
                   Content="Tags:"
                   />
            <Button Width="72" Height="35"
                    Command="{Binding NotesPanelAddTagCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Content="Edit Tags"
                    />
        </StackPanel>
        <ListBox Grid.Row="9"
                 Margin="3"
                 IsSynchronizedWithCurrentItem="True"
                 ItemsSource="{Binding Tags}"
                 />
        <Button Grid.Row="10"
                Width="100"
                Command="{Binding NotesPanelCompleteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                Content="Complete"
                />
    </Grid>
</UserControl>